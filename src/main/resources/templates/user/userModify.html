<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원정보 수정</title>
</head>
<body>
    <h1>회원정보 수정</h1>
    <form action="#" th:action="@{/user/update}" method="post" enctype="multipart/form-data" th:object="${user}">
        <fieldset>
            <legend>회원정보 수정</legend>
            <ul>
                <li>
                    <label>프로필 사진 변경</label>
                    <input type="file" name="reloadFile" id="profileImage" accept="image/*" onchange="previewImage(event)">
                	<div  th:if="${user.userFile != null}">
                        <img id="preview" th:src="@{|${user.userFile.filePath}${user.userFile.fileRename}|}" alt="미리보기 이미지" style="width: 150px; height: auto;">
                    </div>
                </li>
                 <li>
                    <label>아이디 *</label>
                    <input type="text" name="userId" th:field="*{userId}" placeholder="아이디를 입력해주세요" readonly>
                    <div th:if="${#fields.hasErrors('userId')}" th:errors="*{userId}"></div>
                </li>
                <li>
                    <label>새 비밀번호 *</label>
                    <input type="password" name="userPw" th:field="*{userPw}" placeholder="비밀번호를 입력해주세요">
                    <div th:if="${#fields.hasErrors('userPw')}" th:errors="*{userPw}"></div>
                </li>
                <li>
                    <label>새 비밀번호 확인 *</label>
                    <input type="password" name="confirm_userPw" th:field="*{confirm_userPw}" placeholder="비밀번호를 한번 더 입력해주세요">
                    <div th:if="${#fields.hasErrors('confirm_userPw')}" th:errors="*{confirm_userPw}"></div>
                </li>
                
                <li>
                    <label>이름 *</label>
                    <input type="text" name="userName" th:field="*{userName}" placeholder="이름을 입력해주세요" readonly>
                    <div th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}"></div>
                </li>
                <li>
                    <label>이메일 *</label>
                    <input type="text" name="email" th:field="*{email}">
                    <div th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                </li>
                <li>
                    <label>성별</label>
                    남 <input type="radio" name="gender" value="M" th:field="*{gender}" readonly>
                    여 <input type="radio" name="gender" value="F" th:field="*{gender}" readonly>
                </li>
                <li>
                    <label>휴대폰</label>
                    <input type="text" name="phone" th:field="*{phone}">
                </li>
                <li>
                    <label>주소</label>
                    <input type="text" name="address" th:field="*{address}">
                </li>
            </ul>
        </fieldset>
        <input type="submit" value="수정하기">
    </form>
    <script>
        function previewImage(event) {
            var reader = new FileReader();
            reader.onload = function(){
                var output = document.getElementById('preview');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }
        
        
        
    </script>
</body>
</html>
