<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org" >
	<head>
		<meta charset="UTF-8">
		<title>술 이야기 메인</title>
	</head>
	<body>
		<h1>술 이야기 메인 - 카드</h1>
		
	<form action="/board/listCard" method="post">
		 <select name="searchCondition">
		 	<option value="all" th:selected="${searchCondition eq 'all'}">전체</option>
		    <option value="boardSubject" th:selected="${searchCondition eq 'boardSubject'}">제목</option>
		    <option value="boardWriter" th:selected="${searchCondition eq 'boardWriter'}">작성자</option>
		 </select>
		 <input type="text" name="searchKeyword" th:value="${searchKeyword}">

		<button>검색</button>
	</form>
	<div>
		<form action="/board/searchTag_listCard" method="post">
			<div th:each="tag : ${bTagList}">
				<label th:for="${tag.boardTagName}">[[${tag.boardTagName}]]</label>		
				<input name="tagName" th:value="${tag.boardTagName}" th:id="${tag.boardTagName}" type="checkbox">
			</div>
			<button>간편검색</button>
		</form>
	</div>
		
		
	<div th:if="${#lists.isEmpty(bList)}">
			<div>NoData</div>
			<a th:href="@{/board/listCard(cp=${p},boardSubject=${boardSubject})}">처음으로</a>
 	</div>	
	<div th:if="${!#lists.isEmpty(bList)}" th:each="board : ${bList}">
		
		<div class="boardOne">
			<div>
				<div>userId [[${board.userId}]]</div>
				<div>boardPoint [[${board.boardPoint}]]</div>
				<div>boardDate [[${board.boardDate}]]</div>
				<div>viewCount [[${board.viewCount}]]</div>
<!-- 				프로필사진, 회원ID,  -->
			</div>
			<div>
				<div>boardSubject [[${board.boardSubject}]]</div>
				<div>liquorId [[${board.liquorId}]]</div>
			</div>
			<div>
				<div>boardContent</div>
				<div th:utext="${board.boardContent}" class="contentDiv-text"></div>
				<div th:each="bFile : ${bFileList}">
					<div th:if="${bFile.boardNo == board.boardNo}">
						<img alt="썸네일이미지" th:src="@{|${bFile.boardFilePath}/${bFile.boardFileRename}|}" style="max-width: 300px; max-height: 300px;">
					</div>
				</div>
<!-- 			th문 utext을 이용하여 태그로 이루어진 내용 가져옴 -->
			</div>
			<div>
				<div th:each="tag : ${bTagList}">
					<div th:if="${tag.boardNo == board.boardNo}">[[${tag.boardTagName}]]</div>
				</div>
			</div>
		</div>
		<br><br><br>
	</div>
	
	
	<div th:unless="${#lists.isEmpty(bList)}">
		<div>
			<a th:if="${pn.getStartNavi() != 1}"  th:href="@{/board/listCard(cp=${pn.prevPage}, searchCondition=${searchCondition}, searchKeyword=${searchKeyword})}">이전페이지</a>
			<div th:each="p : ${#numbers.sequence(pn.startNavi, pn.endNavi)}">
				<div th:if="${p == pn.currentPage}">
					<div>
						[[${p}]]
					</div>
				</div>
				<div th:if="${p != pn.currentPage}">
					<a th:href="@{/board/listCard(cp=${p}, searchCondition=${searchCondition}, searchKeyword=${searchKeyword})}" th:text="${p}"></a>			
				</div>
			</div>
			<a th:if="${pn.getEndNavi() != pn.getMaxPage()}" th:href="@{/board/listCard(cp=${pn.nextPage}, searchCondition=${searchCondition}, searchKeyword=${searchKeyword})}">다음페이지</a>
		</div>
	</div>
		
	</body>
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			
	        let contentDivText = document.querySelectorAll(".contentDiv-text");
	        
	        // 텍스트만 출력하기
	        contentDivText.forEach(item => {
	    		item.innerHTML = item.textContent;
	        });
	        
	        
// 	        contentDivImg.forEach(item => {
// 	        	item.innerHTML = item.innerHTML.replace(/<(?!\/?img\b)[^>]*>/gi, ''); // replace(/<\/?[^img][^>]*>/g, '')  // <img> 태그 외의 모든 태그 제거
//  //	        	item.textContent = "";
// 	        	// div 내의 모든 자식 노드를 순회합니다.
			   
// 	        });
	        
	    });
		
		
		
		
	</script>
</html>