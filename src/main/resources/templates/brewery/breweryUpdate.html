<!DOCTYPE html>
<html lang="ko" xmlns:th="http://thymeleaf.org">
	<head>
	<meta charset="UTF-8">
	<title>양조장 정보 변경</title>
	<script src="https://unpkg.com/@yaireo/tagify"></script>
<!-- 	<script src="https://unpkg.com/@yaireo/tagify/dist/tagify.polyfills.min.js"></script> -->
	<link href="https://unpkg.com/@yaireo/tagify/dist/tagify.css" rel="stylesheet" type="text/css" />
	<style>
			.tagify {
			    display: inline-flex;
			    flex-wrap: wrap;
			    padding: 0;
			    margin: 0;
			    border: 1px solid black;
			    height: 30px;
			}
			
			.tagify__tag {
			    display: inline-flex;
			    align-items: center;
			    margin: 0.2em;
			    background: none;   /* 배경 제거 */
			    border: none;       /* 테두리 제거 */
			    border-radius: 3px;
			}
			
			.tagify__tag__removeBtn {
			    margin-left: 0.3em;
			    cursor: pointer;
			    background: none;   /* 배경 제거 */
			    border: none;       /* 테두리 제거 */
			    color: inherit;     /* 색상 상속 */
			}
			
			.tagify__input {
			    border: none;       /* 테두리 제거 */
			    margin: 0;
			    padding: 0;         /* 여백 제거 */
			    outline: none;      /* 포커스 스타일 제거 */
			    flex-grow: 1;
			    min-width: 120px;   /* 최소 너비 */
			}
			.tagify__tag > div {
			    padding: 0;
			}
			.tagify--focus {
			    --tags-border-color: black !important;  /* 또는 원하는 색상 */
			    transition: none !important;  /* 애니메이션 효과 제거 */
			    height: 30px;
			}
		</style>
	</head>
	<body>
		<h1>양조장 정보 변경</h1>
		<form action="/brewery/update" method="post" th:object="${brewery}" enctype="multipart/form-data">
		    <input type="hidden" name="breweryNo" th:value="*{breweryNo}">
		    <input type="hidden" name="fileName" th:value="*{fileName}">
		    <input type="hidden" name="fileRename" th:value="*{fileRename}">
		    <input type="hidden" name="filePath" th:value="*{filePath}">
            양조장명 <input type="text" name="breweryName" th:value="*{breweryName}"> <br>
        	지역 
			<select id="local" name="breweryLocal" th:value="*{breweryLocal}">
				<option value="sudo">수도권</option>
<<<<<<< HEAD
				<option value="gang">강원</option>
				<option value="chung">충청</option>
				<option value="gyeong">경상</option>
				<option value="jeoll">전라</option>
				<option value="jeju">제주</option>
=======
				<option value="sudo">강원</option>
				<option value="sudo">충청</option>
				<option value="sudo">경상</option>
				<option value="sudo">전라</option>
				<option value="sudo">제주</option>
>>>>>>> 6317c83cb8712b3731ff722bc6eeb2dc2fc5eed2
			</select> <br>
            주소 <input type="text" name="breweryAddr" th:value="*{breweryAddr}"> <br>
            번호 <input type="text" name="breweryPhone" th:value="*{breweryPhone}"> <br>
            오픈시간 <input type="time" name="openTime" th:value="*{openTime}"> <br>
            마감시간 <input type="time" name="closeTime" th:value="*{closeTime}"> <br>
            홈페이지 <input type="text" name="breweryUrl" th:value="*{breweryUrl}"> <br>
            양조장 사진 
            		<th:block th:if="${brewery.fileRename != null}">
					    <th:block th:if="${#strings.endsWith(brewery.fileRename, '.jpg') || #strings.endsWith(brewery.fileRename, '.png') || #strings.endsWith(brewery.fileRename, '.jpeg')}">
					        <img id="previewImage" th:src="@{|${brewery.filePath}/${brewery.fileRename}|}" alt="미리보기 이미지" style="max-width: 300px; max-height: 300px;">
					    </th:block>
					</th:block> <br>
					<th:block th:if="${brewery.fileRename == null}">
						<span>사진 없음</span>
					</th:block>
					<input type="file" id="newFile" name="uploadFile"> <br>
           	해시태그 <input type="text" name="breweryTagName" id="inputHashTag1" th:value="${tagString}"> <br>
            편의시설
            <div style="border: 1px solid black;">
			    <label for="park">
			        <input type="checkbox" id="park" name="facilities" value="park" th:checked="${#strings.contains(brewery.facilities ?: '', 'park')}"> 주차장
			    </label>
			    <label for="restroom">
			        <input type="checkbox" id="restroom" name="facilities" value="restroom" th:checked="${#strings.contains(brewery.facilities ?: '', 'restroom')}"> 화장실
			    </label>
			    <label for="wifi">
			        <input type="checkbox" id="wifi" name="facilities" value="wifi" th:checked="${#strings.contains(brewery.facilities ?: '', 'wifi')}"> 와이파이
			    </label>
			    <label for="air-conditioner">
			        <input type="checkbox" id="air-conditioner" name="facilities" value="air-conditioner" th:checked="${#strings.contains(brewery.facilities ?: '', 'air-conditioner')}"> 에어컨
			    </label>
			    <label for="cafe">
			        <input type="checkbox" id="cafe" name="facilities" value="cafe" th:checked="${#strings.contains(brewery.facilities ?: '', 'cafe')}"> 카페
			    </label>
			    <label for="information">
			        <input type="checkbox" id="information" name="facilities" value="information" th:checked="${#strings.contains(brewery.facilities ?: '', 'information')}"> 유도 및 안내시설
			    </label>
			    <label for="luggage">
			        <input type="checkbox" id="luggage" name="facilities" value="luggage" th:checked="${#strings.contains(brewery.facilities ?: '', 'luggage')}"> 짐 보관 가능
			    </label>
			    <label for="non-smoking">
			        <input type="checkbox" id="non-smoking" name="facilities" value="non-smoking" th:checked="${#strings.contains(brewery.facilities ?: '', 'non-smoking')}"> 금연
			    </label>
			    <label for="smoking">
			        <input type="checkbox" id="smoking" name="facilities" value="smoking" th:checked="${#strings.contains(brewery.facilities ?: '', 'smoking')}"> 흡연구역
			    </label>
			    <label for="restaurant">
			        <input type="checkbox" id="restaurant" name="facilities" value="restaurant" th:checked="${#strings.contains(brewery.facilities ?: '', 'restaurant')}"> 레스토랑
			    </label> <br>
	            키즈존
	            <label for="kidsZoneYes">
	                <input type="radio" id="kidsZoneYes" name="kidsZone" value="yes" th:checked="${brewery.kidsZone != null and brewery.kidsZone.equals('yes')}"> 입장 가능
	            </label>
	            <label for="kidsZoneNo">
	                <input type="radio" id="kidsZoneNo" name="kidsZone" value="no" th:checked="${brewery.kidsZone != null and brewery.kidsZone.equals('no')}"> 입장 불가
	            </label> <br>
	            장애인 편의시설
	            <label for="disabledFriendlyYes">
	                <input type="radio" id="disabledFriendlyYes" name="disFriendly" value="yes" th:checked="${brewery.disFriendly != null and brewery.disFriendly == 'yes'}"> 휠체어 출입구
	            </label>
	            <label for="disabledFriendlyNo">
	                <input type="radio" id="disabledFriendlyNo" name="disFriendly" value="no" th:checked="${brewery.disFriendly != null and brewery.disFriendly == 'no'}"> 별도 시설 없음
	            </label>
	        </div>
            <input type="submit" value="수정하기"> <br>
<<<<<<< HEAD
=======
<<<<<<< HEAD
            태그 <input type="text" name="breweryTagName" id="inputHashTag"> <br>
=======
>>>>>>> 6317c83cb8712b3731ff722bc6eeb2dc2fc5eed2
>>>>>>> yehong
			<div>
			    <h2>체험 프로그램</h2>
			    <div th:each="tour : ${tourList}">
			        <div>
			        	<input type="hidden" name="tourNo" th:value="${tour.tourNo}">
			        	<strong>프로그램명 : </strong> <span th:text="${tour.tourName}"></span> <br>
			            <span th:text="${tour.tourContent}"></span> <br>
			            <span th:text="${tour.timeTaken}"></span> <br>
			            <span th:text="${tour.tourPrice}"></span> <br>
			            <td><button type="button" th:onclick="modifyTour(/*[[${tour.tourNo}]]*/);">수정</button></td>
	            		<td><button type="button" th:onclick="deleteTour(/*[[${brewery.breweryNo}]]*/, /*[[${tour.tourNo}]]*/);">삭제</button></td>
			        </div>
			    </div>
			</div>
			<button type="button" th:onclick="goTourInsert(/*[[${brewery.breweryNo}]]*/);">등록</button>
        </form>
	</body>
	<script th:inline="javascript">
		function goTourInsert(breweryNo) {
			location.href="/tour/write/" + breweryNo;
		}
	    document.getElementById('newFile').addEventListener('change', function(event) {
	        var file = event.target.files[0];
	        if (file) {
	            var reader = new FileReader();
	            reader.onload = function(e) {
	                var previewImage = document.getElementById('previewImage');
	                previewImage.src = e.target.result;
	                previewImage.style.display = 'block';
	            };
	            reader.readAsDataURL(file);
	        }
	    });
	    function modifyTour(tourNo) {	
	        location.href = "/tour/update/" + tourNo;
	    }
	    function deleteTour(breweryNo, tourNo) {
	        if (confirm("정말 삭제하시겠습니까?")) {
	            location.href = "/tour/delete/" + breweryNo + "/" + tourNo ;
	        }
	    }
<<<<<<< HEAD
	    var input = document.querySelector('input[name=breweryTagName]');
<<<<<<< HEAD
	    const tagify = new Tagify(input, {
	    	
	    });
=======
	    new Tagify(input);
=======
>>>>>>> 6317c83cb8712b3731ff722bc6eeb2dc2fc5eed2
>>>>>>> yehong
	</script>
</html>